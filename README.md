# dndgram
A test bot template for dating among players of tabletop role-playing games
## Предварительный шаблон работы
Данный телеграмм бот должен представлять собой интерфейс для пользователей, чтобы они могли регистрировать свои данные в общей БД.
Для реализации этих задач планируется использовать:
- асинхронную библиотеку AIOgram для взаимодействия с Telegram Bot API;
- SQLAclhemy для работы с БД.
## Схема БД
БД должна содержать в себе 3 модели: User, Location, Dm, Player. Используемые связи: один к одному, для Location - многие к одному.
### Модель User
Должна содержать в себе всю основную информацию о пользователе. Включает в себя следующие поля:
- **telegram_id** | [*INT*] содержит id пользователя;
- **username** | [*CHAR*] если у пользователя присутсвует @ник;
- **gender** | [*ChoiceType*] +  его пол, ограничено списком;
- **age** | [*SMALLINT*] возраст;
- **location** [*ForeignKey*] внешний ключ модели, содержащей информацию о городе;
- **is_master** | [*ForeignKey*] внешний ключ Dm-модели, содержащий описание опыта ведения игр в качестве мастера;
- **is_player** | [*ForeignKey*] внешний ключ Player-модели, содержащий информацию о игровых предпочтениях пользователя и его статус;
- **bio** | [*TEXT*] дополнительная опциональная информация о пользователе;
- **preferences** | [*ChoiceType*] поле ограниченное выбором из списка основных жанров НРИ.
### Модель Location
Используется для последующей удобной фильтрации пользователей по городу. Поля:
- **user** | [*ForeignKey*] внешний ключ к User-модели;
- **city** | [*CHAR*] город поиска;
- **state** | [*CHAR*] страна пользователя.
### Модель Master
- **user** | [*ForeignKey*] внешний ключ к User-модели;
- **experience** | [*BOOLEAN*] двоичное поле, пользователь либо с опытом проведения игр, либо без.
### Модель Player
- **user** | [*ForeignKey*] внешний ключ к User-модели;
- **experience** | [*BOOLEAN*] двоичное поле, пользователь либо знает правила игры, либо нет.
## Порядок взаимодействия с ботом
Пользователь инициирует начало беседы с ботом с помощью команды ***/start***.
Бот после этого получает с сообщения telegram_id пользователя и на основе этого создает предварительную запись в БД, если пользователя с таким id не существует.
Пользователь получает приветственное сообщение и готовые к взаимодействию кнопки: "Мой профиль", "Поиск людей".
